<div class="field-list-item full-width"
  ng-mouseover="Fields.highlighted[fieldDef.name] = true"
  ng-mouseout="Fields.highlighted[fieldDef.name] = false"
>

  <i class="fa selection clickable"
    ng-class="{'fa-check-square': Fields.isSelected(fieldDef.name), 'fa-square': Fields.isSelected(fieldDef.name) === undefined, 'fa-minus-circle': Fields.isSelected(fieldDef.name) === false}"
    ng-click="Fields.toggleSelected(fieldDef.name)"
    ng-dblclick="consts.enableExclude && Fields.setSelected(fieldDef.name, false)"
  ></i>

  <field-info
    field-def="fieldDef"
    show-type="true"
    show-caret="true"
    disable-count-caret="true"
    show-info="true"
    popup-content="popupContent"
    action="Fields.toggleSelected(fieldDef.name)"
    class="flex-grow-1 list-item clickable"
    ng-class="{selected: Fields.isSelected(fieldDef.name), excluded: Fields.isSelected(fieldDef.name)===false, highlighted: Fields.highlighted[fieldDef.name]}"
    ></field-info>

  <div class="drop-container">
    <div class="popup-menu popup-functions" ng-show="(fieldDef.type!=='ordinal' && fieldDef.aggregate!=='count') || consts.enableExclude">
      <div style="width:150px">
        <function-list field-def="Fields.fields[fieldDef.name]"></function-list>
      </div>

      <div class="inclusion" ng-show="consts.enableExclude">
        <h4>Field</h4>
        <div>
          <a ng-class="{inactive: Fields.isSelected(fieldDef.name) !== true}"
            ng-click="Fields.setSelected(fieldDef.name, true)">
            <i class="fa fa-check-square"></i> Include
          </a>
        </div>
        <div>
          <a ng-class="{inactive: Fields.isSelected(fieldDef.name) !== undefined}"
            ng-click="Fields.setSelected(fieldDef.name, undefined)">
            <i class="fa fa-square"></i> Optional
          </a>
        </div>
        <div>
          <a ng-class="{inactive: Fields.isSelected(fieldDef.name) !== false}"
            ng-click="Fields.setSelected(fieldDef.name, false)">
            <i class="fa fa-minus-circle"></i> Exclude
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
